name: Deploy to Production

on:
  workflow_dispatch:  # üîπ ejecuci√≥n manual desde el bot√≥n ‚ÄúRun workflow‚Äù

permissions:
  contents: read
  id-token: write

jobs:
  deploy_prod:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download latest release asset
        id: download_release
        uses: robinraju/release-downloader@v1.10
        with:
          repository: ${{ github.repository }}
          latest: true
          fileName: "app-dist.zip"
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Unzip build
        run: unzip app-dist.zip -d ./dist

      - name: Deploy to Firebase Hosting
        uses: w9jds/firebase-action@v13.15.3
        with:
          args: deploy --only hosting
        env:
          GCP_SA_KEY: ${{ secrets.GCP_SA_KEY }}
